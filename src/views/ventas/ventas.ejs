<%- layout('./layouts/main.ejs') %>
    <link rel="stylesheet" href="../style/ventas.css">

    <div class="container-fluid ventaHead">
        <h1>Ventas</h1>
    </div>
    <div class="container-fluid">
        <div class="row mt-5">
            <div class="col-3">
                <div class="form-floating search">
                    <input type="text" class="form-control rounded-pill" id="floatingInputInvalid" placeholder="">
                    <label for="floatingInputInvalid" class="label-buscar"><i class="fa-solid fa-magnifying-glass"></i>
                        Buscar venta</label>
                </div>
            </div>
            <div class="col-3">
                <button class="reporte-crear rounded-pill text-start">
                    <p class="rounded-pill"><i class="fa-solid fa-download icon-generar-reporte"></i> Generar reporte de
                        ventas</p>
                </button>
            </div>
            <div class="col-3">
                <button class="reporte-crear rounded-pill text-start"
                    onclick="window.location.href='/create-venta-servicio'">
                    <p class="rounded-pill">crear venta de servicio<i class="fa-solid fa-circle-plus fa-2xl"
                            style="color: #ffffff; margin-left: 29% ;"></i></p>
                </button>
            </div>
            <div class="col-3">
                <button class="reporte-crear rounded-pill text-start"
                    onclick="window.location.href='/create-venta-pedido'">
                    <p class="rounded-pill">crear venta de pedido<i class="fa-solid fa-circle-plus fa-2xl"
                            style="color: #ffffff; margin-left: 29% ;"></i></p>
                </button>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <table class="table table-hover table-borderless mt-3 text-center table-sm">
            <thead>
                <tr class="table-secondary">
                    <th class="p-3">ID Venta</th>
                    <th class="p-3">Venta Servicio</th>
                    <th class="p-3">Fecha Venta</th>
                    <th class="p-3">Costo Total</th>
                    <th class="p-3">Estado Venta</th>
                    <th class="p-3">Opciones</th>
                </tr>
            </thead>
            <tbody>
                <script>
                    // Definir el mapeo de estados
                    const estadoMapping = {
                        '1': 'Pendiente',
                        '2': 'En progreso',
                        '3': 'Finalizado'
                    };
                </script>

                <% id=1; %>
                    <% ventas.forEach(obj=> { %>
                        <tr>
                            <td>
                                <%= id %>
                            </td>
                            <td>
                                <%= obj.idCita %>
                            </td>
                            <td>
                                <%= obj.fechaVentaServicio %>
                            </td>
                            <td>
                                <%= obj.costoTotalCita %>
                            </td>
                            <td>
                                
                                <%= obj.estadoVentaServicio %>
                            </td>
                            <td>
                                <div class="d-flex justify-content-between">
                                    <div class="col margin-left: 1%">
                                        <a href="#" onclick="verDetallesCompra()">
                                            <i class="fa-solid fa-eye ver" style="color: #3cc3bd;"></i>
                                        </a>
                                    </div>
                                    <div><label class="switch"><input type="checkbox" checked><span
                                                class="slider round"></span></label></div>
                                </div>
                            </td>
                        </tr>
                        <% id++; %>
                            <% }); %>

            </tbody>
        </table>
    </div>
    <div class="container-fluid container-paginado">
        <div>
            <div class="row">
                <div class="col d-flex paginado">
                    <a href="">
                        <i class="fa-solid fa-caret-left"></i>
                    </a>
                    <p>1</p>
                    <a href="">
                        <i class="fa-solid fa-caret-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>